<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚úÖ TEST FINAL - Traduction AGECOSCO</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
    
    <!-- Language System -->
    <script src="js/translations.js"></script>
    <!-- Language System: moved to page end after Bootstrap JS -->
    
    <style>
        body {
            padding: 0;
            margin: 0;
            font-family: 'Roboto', sans-serif;
        }
        
        .test-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .status-banner {
            background: linear-gradient(135deg, #00B98E 0%, #0056b3 100%);
            color: white;
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .test-section {
            background: white;
            padding: 30px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-left: 5px solid #00B98E;
        }
        
        .test-section h3 {
            color: #00B98E;
            margin-bottom: 20px;
            font-weight: bold;
        }
        
        .result-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid #28a745;
        }
        
        .error-box {
            background: #fff3cd;
            padding: 20px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid #ffc107;
        }
        
        .success {
            color: #28a745;
            font-weight: bold;
        }
        
        .fail {
            color: #dc3545;
            font-weight: bold;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        @media (max-width: 768px) {
            .test-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .navbar-test {
            background: #343a40;
            padding: 15px 0;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        
        .test-button {
            background: #00B98E;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
            margin: 5px;
        }
        
        .test-button:hover {
            background: #008f6f;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .live-output {
            background: #1e1e1e;
            color: #00ff00;
            padding: 20px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .live-output .timestamp {
            color: #888;
            margin-right: 10px;
        }
        
        .live-output .success {
            color: #00ff00;
        }
        
        .live-output .error {
            color: #ff4444;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <!-- Status Banner -->
        <div class="status-banner">
            <h1 class="display-3">‚úÖ TEST FINAL DE TRADUCTION</h1>
            <p class="lead">Syst√®me Multilingue AGECOSCO - Correction D√©finitive</p>
            <div id="currentLangDisplay" style="font-size: 24px; margin-top: 20px;">
                üåç Langue Actuelle: <span id="langName" style="font-weight: bold;">Chargement...</span>
            </div>
        </div>

        <!-- Quick Test Buttons -->
        <div class="test-section">
            <h3><i class="fas fa-rocket"></i> Test Rapide</h3>
            <div class="text-center">
                <button class="test-button" onclick="switchToFrench()">
                    üá´üá∑ Passer en Fran√ßais
                </button>
                <button class="test-button" onclick="switchToEnglish()">
                    üá¨üáß Switch to English
                </button>
                <button class="test-button" onclick="runFullTest()">
                    üß™ Lancer Test Complet
                </button>
            </div>
        </div>

        <!-- Live Test Output -->
        <div class="test-section">
            <h3><i class="fas fa-terminal"></i> Console de Test en Direct</h3>
            <div id="liveOutput" class="live-output">
                <div><span class="timestamp">[00:00:00]</span> Pr√™t √† tester...</div>
            </div>
        </div>

        <!-- Real Navbar Test -->
        <div class="test-section">
            <h3><i class="fas fa-bars"></i> Navbar R√©elle (Comme sur votre site)</h3>
            
            <nav class="navbar navbar-expand-lg bg-white navbar-light sticky-top p-0 px-4 px-lg-5">
                <a href="index.html" class="navbar-brand d-flex align-items-center">
                    <h2 class="m-0 text-primary">GROUP AGECOSCO</h2>
                </a>
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <div class="navbar-nav ms-auto py-4 py-lg-0">
                        <a href="index.html" class="nav-item nav-link">Home</a>
                        <div class="nav-item dropdown">
                            <a href="about.html" class="nav-item nav-link dropdown-toggle">About</a>
                            <div class="dropdown-menu rounded-0 rounded-bottom m-0">
                                <a href="./quality-policy.html" class="dropdown-item">Quality and policy</a>
                                <a href="team.html" class="dropdown-item">Our Team</a>
                                <a href="./health-safety.html" class="dropdown-item">Health and Safety</a>
                                <a href="./general-conditions.html" class="dropdown-item">General conditions of the Service</a>
                            </div>
                        </div>
                        <a href="branches.html" class="nav-item nav-link">Branches</a>
                        <div class="nav-item dropdown">
                            <a href="service.html" class="nav-item nav-link dropdown-toggle">Services</a>
                            <div class="dropdown-menu rounded-0 rounded-bottom m-0">
                                <a href="tally-inspection.html" class="dropdown-item">Tally Inspections and Supervisions</a>
                                <a href="survey.html" class="dropdown-item">Surveys</a>
                                <a href="./p-i-claims-handling.html" class="dropdown-item">P&I Claims Handling</a>
                                <a href="loss-prevent.html" class="dropdown-item">Loss prevention plans</a>
                                <a href="risk.html" class="dropdown-item">Risk and management</a>
                                <a href="fruit-perish.html" class="dropdown-item">Fruit and perishables</a>
                                <a href="agri-food.html" class="dropdown-item">Agrifood sector</a>
                            </div>
                        </div>
                        <div class="nav-item dropdown">
                            <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"
                                aria-expanded="false" aria-haspopup="true" aria-label="Language selection menu">
                                <i class="fas fa-globe me-2"></i>Languages
                            </a>
                            <div class="dropdown-menu rounded-0 rounded-bottom m-0" aria-label="Language options">
                                <a href="#" class="dropdown-item" data-lang="fr" lang="fr">
                                    <i class="fas fa-check me-2 text-primary" style="opacity: 0;"></i>
                                    <span>Fran√ßais</span>
                                </a>
                                <a href="#" class="dropdown-item" data-lang="en" lang="en">
                                    <i class="fas fa-check me-2 text-primary" style="opacity: 0;"></i>
                                    <span>English</span>
                                </a>
                            </div>
                        </div>
                        <a href="contact.html" class="nav-item nav-link">Contact</a>
                    </div>
                </div>
            </nav>
            
            <div class="alert alert-info mt-3">
                <strong>Instructions:</strong> Cliquez sur les boutons "Passer en Fran√ßais" ou "Switch to English" ci-dessus et observez les changements dans la navbar !
            </div>
        </div>

        <!-- Test Results Grid -->
        <div class="test-grid">
            <!-- Test Navbar Links -->
            <div class="test-section">
                <h3><i class="fas fa-link"></i> Liens Navbar</h3>
                <div id="navbarLinksTest" class="result-box">
                    En attente du test...
                </div>
            </div>

            <!-- Test Dropdowns -->
            <div class="test-section">
                <h3><i class="fas fa-caret-down"></i> Dropdowns</h3>
                <div id="dropdownsTest" class="result-box">
                    En attente du test...
                </div>
            </div>

            <!-- Test Language Selector -->
            <div class="test-section">
                <h3><i class="fas fa-globe"></i> S√©lecteur de Langue</h3>
                <div id="langSelectorTest" class="result-box">
                    En attente du test...
                </div>
            </div>

            <!-- Test Buttons -->
            <div class="test-section">
                <h3><i class="fas fa-hand-pointer"></i> Boutons</h3>
                <div id="buttonsTest" class="result-box">
                    En attente du test...
                </div>
            </div>
        </div>
    </div>

    <script>
        let testOutput = [];
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const outputDiv = document.getElementById('liveOutput');
            const className = type === 'success' ? 'success' : type === 'error' ? 'error' : '';
            
            testOutput.push(`<div><span class="timestamp">[${timestamp}]</span> <span class="${className}">${message}</span></div>`);
            outputDiv.innerHTML = testOutput.join('');
            outputDiv.scrollTop = outputDiv.scrollHeight;
        }
        
        function updateLangDisplay() {
            const lang = window.languageManager ? window.languageManager.getCurrentLanguage() : 'unknown';
            const langName = lang === 'fr' ? 'Fran√ßais üá´üá∑' : lang === 'en' ? 'English üá¨üáß' : 'Inconnue';
            document.getElementById('langName').textContent = langName;
        }
        
        function switchToFrench() {
            log('üîÑ Changement vers le fran√ßais...', 'info');
            if (window.languageManager) {
                window.languageManager.setLanguage('fr');
                setTimeout(() => {
                    log('‚úÖ Langue chang√©e en Fran√ßais !', 'success');
                    updateLangDisplay();
                    checkTranslations('fr');
                }, 500);
            } else {
                log('‚ùå LanguageManager non trouv√©!', 'error');
            }
        }
        
        function switchToEnglish() {
            log('üîÑ Switching to English...', 'info');
            if (window.languageManager) {
                window.languageManager.setLanguage('en');
                setTimeout(() => {
                    log('‚úÖ Language changed to English!', 'success');
                    updateLangDisplay();
                    checkTranslations('en');
                }, 500);
            } else {
                log('‚ùå LanguageManager not found!', 'error');
            }
        }
        
        function checkTranslations(expectedLang) {
            log(`üîç V√©rification des traductions (${expectedLang})...`, 'info');
            
            // Check navbar links
            const homeLink = document.querySelector('a.nav-link[href="index.html"]');
            const aboutLink = document.querySelector('a.nav-link[href="about.html"]');
            const contactLink = document.querySelector('a.nav-link[href="contact.html"]');
            
            const homeText = homeLink ? homeLink.textContent.trim() : 'NOT FOUND';
            const aboutText = aboutLink ? aboutLink.textContent.trim() : 'NOT FOUND';
            const contactText = contactLink ? contactLink.textContent.trim() : 'NOT FOUND';
            
            log(`  Home link: "${homeText}"`, homeText === (expectedLang === 'fr' ? 'Accueil' : 'Home') ? 'success' : 'error');
            log(`  About link: "${aboutText}"`, aboutText === (expectedLang === 'fr' ? '√Ä Propos' : 'About') ? 'success' : 'error');
            log(`  Contact link: "${contactText}"`, contactText === (expectedLang === 'fr' ? 'Contactez-Nous' : 'Contact') ? 'success' : 'error');
            
            // Check language selector
            const langSelector = document.querySelector('.nav-link.dropdown-toggle[aria-label*="Language"]');
            const langSelectorText = langSelector ? langSelector.textContent.trim() : 'NOT FOUND';
            const hasGlobe = langSelector && langSelector.querySelector('i.fa-globe');
            
            log(`  Language selector: "${langSelectorText.replace(/\s+/g, ' ')}"`, langSelectorText.includes(expectedLang === 'fr' ? 'Langues' : 'Languages') ? 'success' : 'error');
            log(`  Globe icon: ${hasGlobe ? 'Present ‚úÖ' : 'Missing ‚ùå'}`, hasGlobe ? 'success' : 'error');
            
            // Check dropdowns
            const qualityLink = document.querySelector('.dropdown-item[href*="quality-policy"]');
            const qualityText = qualityLink ? qualityLink.textContent.trim() : 'NOT FOUND';
            log(`  Quality dropdown: "${qualityText}"`, qualityText.includes(expectedLang === 'fr' ? 'Qualit√©' : 'Quality') ? 'success' : 'error');
            
            updateTestResults(expectedLang, {
                homeText, aboutText, contactText, langSelectorText, hasGlobe, qualityText
            });
        }
        
        function updateTestResults(lang, data) {
            // Navbar links
            document.getElementById('navbarLinksTest').innerHTML = `
                <strong>Home:</strong> ${data.homeText} ${data.homeText === (lang === 'fr' ? 'Accueil' : 'Home') ? '‚úÖ' : '‚ùå'}<br>
                <strong>About:</strong> ${data.aboutText} ${data.aboutText === (lang === 'fr' ? '√Ä Propos' : 'About') ? '‚úÖ' : '‚ùå'}<br>
                <strong>Contact:</strong> ${data.contactText} ${data.contactText === (lang === 'fr' ? 'Contactez-Nous' : 'Contact') ? '‚úÖ' : '‚ùå'}
            `;
            
            // Language selector
            document.getElementById('langSelectorTest').innerHTML = `
                <strong>Texte:</strong> ${data.langSelectorText.replace(/\s+/g, ' ')} ${data.langSelectorText.includes(lang === 'fr' ? 'Langues' : 'Languages') ? '‚úÖ' : '‚ùå'}<br>
                <strong>Ic√¥ne üåç:</strong> ${data.hasGlobe ? 'Pr√©sente ‚úÖ' : 'Manquante ‚ùå'}
            `;
            
            // Dropdowns
            document.getElementById('dropdownsTest').innerHTML = `
                <strong>Quality:</strong> ${data.qualityText} ${data.qualityText.includes(lang === 'fr' ? 'Qualit√©' : 'Quality') ? '‚úÖ' : '‚ùå'}
            `;
        }
        
        function runFullTest() {
            log('üöÄ D√©marrage du test complet...', 'info');
            log('');
            
            log('Test 1: Passage en Fran√ßais...', 'info');
            switchToFrench();
            
            setTimeout(() => {
                log('');
                log('Test 2: Passage en Anglais...', 'info');
                switchToEnglish();
                
                setTimeout(() => {
                    log('');
                    log('Test 3: Retour au Fran√ßais...', 'info');
                    switchToFrench();
                    
                    setTimeout(() => {
                        log('');
                        log('‚úÖ TEST COMPLET TERMIN√â !', 'success');
                    }, 1000);
                }, 2000);
            }, 2000);
        }
        
        // Auto-init on page load
        window.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                log('‚úÖ Page charg√©e', 'success');
                
                if (typeof window.languageManager !== 'undefined') {
                    log('‚úÖ LanguageManager d√©tect√©', 'success');
                    updateLangDisplay();
                    
                    const currentLang = window.languageManager.getCurrentLanguage();
                    log(`‚úÖ Langue actuelle: ${currentLang}`, 'success');
                    
                    setTimeout(() => checkTranslations(currentLang), 500);
                } else {
                    log('‚ùå LanguageManager NON d√©tect√©!', 'error');
                    log('‚ö†Ô∏è V√©rifiez que les scripts sont charg√©s', 'error');
                }
            }, 1000);
        });
    </script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
